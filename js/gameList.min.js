function getElement(e){return document.getElementById(e)}function getTagsFromTable(e){const t=new Set;for(const n of e){const e=n[0],o=n[1],r=getElement(e),s=r.rows;for(let e=1;e<r.rows.length;e++){const n=s[e],r=n.cells[o],l=r.textContent.trim(),c=l.split(/\s*,\s*(?=[^"]*(?:[^"]*"[^"]*)*[^"]*$)/);c.forEach(e=>t.add(e.trim()))}}return Array.from(t).sort()}function taggingSystem(e){const t=getElement("filterTagArea"),n=getElement("filterYearArea");for(const o of e){const e=document.createElement("span");e.classList.add("cbc");const r=document.createElement("input"),s=o.toLowerCase().replace(/\s+/g,"_");r.setAttribute("type","checkbox"),r.setAttribute("id",`cb-${s}`),r.setAttribute("value",o);const l=document.createElement("label");l.textContent=o,l.setAttribute("for",`cb-${s}`),e.appendChild(r),e.appendChild(l),isYear(o)?(l.classList.add("tagYear"),n.appendChild(e)):t.appendChild(e)}}function isYear(e){return!isNaN(parseInt(e))}function filterTable(e,t){for(const n of e){const e=n[0],o=n[1],r=getElement(e),s=r.rows,l=Array.from(document.querySelectorAll(`${t} input[type='checkbox']:checked`)).map(e=>e.value);for(let e=1;e<s.length;e++){const t=s[e],n=t.cells[o],r=n.textContent.trim(),c=r.split(/,(?=(?:[^"]*"[^"]*")*(?![^"]*"))/);let a=!1;if(0===l.length)a=!0;else for(const e of l)if(c.includes(e)){a=!0;break}t.style.display=a?"":"none"}}}function sortTable(e,t){const n=getElement(t);let o=!0,r="asc",s=0;for(;o;){let t=!1;o=!1;let c=n.rows,a=c.length-1;for(var l=1;l<a;l++){const n=c[l].getElementsByTagName("td")[e].innerHTML.toLowerCase(),o=c[l+1].getElementsByTagName("td")[e].innerHTML.toLowerCase();if("asc"===r&&n.localeCompare(o)>0||"desc"===r&&n.localeCompare(o)<0){t=!0;break}}t?(c[l].parentNode.insertBefore(c[l+1],c[l]),o=!0,s++):0===s&&"asc"==r&&(r="desc",o=!0)}}function countTableRows(e,t){const n=getElement(e),o=n.rows.length-1,r=getElement(t);r.textContent=`(${o})`}