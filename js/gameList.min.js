function getElement(e){return document.getElementById(e)}function getTagsFromTable(e){const t=getElement(e),n=new Set;for(let e=1;e<t.rows.length;e++){const o=t.rows[e],r=o.cells[3],l=r.textContent.trim(),s=l.split(/\s*,\s*(?=[^"]*(?:[^"]*"[^"]*)*[^"]*$)/);s.forEach(e=>n.add(e.trim()))}return Array.from(n).sort()}function taggingSystem(e){const t=getElement("filterTagArea"),n=getElement("filterYearArea");for(const o of e){const e=document.createElement("span");e.classList.add("cbc");const r=document.createElement("input"),l=o.toLowerCase().replace(/\s+/g,"_");r.setAttribute("type","checkbox"),r.setAttribute("id",`cb-${l}`),r.setAttribute("value",o);const s=document.createElement("label");s.textContent=o,s.setAttribute("for",`cb-${l}`),e.appendChild(r),e.appendChild(s),isYear(o)?(s.classList.add("tagYear"),n.appendChild(e)):t.appendChild(e)}}function isYear(e){return!isNaN(parseInt(e))}function filterTable(e,t){const n=getElement(e),o=n.rows,r=Array.from(document.querySelectorAll(`${t} input[type='checkbox']:checked`)).map(e=>e.value);for(let e=1;e<o.length;e++){const t=o[e],n=t.cells[3],l=n.textContent.trim(),s=l.split(/,(?=(?:[^"]*"[^"]*")*(?![^"]*"))/);let a=!1;if(0===r.length)a=!0;else for(const e of r)if(s.includes(e)){a=!0;break}t.style.display=a?"":"none"}}function sortTable(e,t){const n=getElement(t);let o=!0,r="asc",l=0;for(;o;){let t=!1;o=!1;let a=n.rows,c=a.length-1;for(var s=1;s<c;s++){const n=a[s].getElementsByTagName("td")[e].innerHTML.toLowerCase(),o=a[s+1].getElementsByTagName("td")[e].innerHTML.toLowerCase();if("asc"===r&&n.localeCompare(o)>0||"desc"===r&&n.localeCompare(o)<0){t=!0;break}}t?(a[s].parentNode.insertBefore(a[s+1],a[s]),o=!0,l++):0===l&&"asc"==r&&(r="desc",o=!0)}}function countTableRows(e,t){const n=getElement(e),o=n.rows.length-1,r=getElement(t);r.textContent=`(${o})`}